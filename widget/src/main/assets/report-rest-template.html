<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN"
        "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">

<head xmlns="http://www.w3.org/1999/html">

    <title>TIBCO Jaspersoft</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script type="text/javascript">
        var NativeCallbacks = {
            onScriptReady: function () {
                return Android.onScriptReady();
            },
            onReportRenedered: function () {
                return Android.onReportRenedered();
            },
            onWindowError: function (error) {
                return Android.onWindowError(error);
            },
            onHyperLinkClick: function (hyperlink) {
                var linkAsString = JSON.stringify(hyperlink);
                return Android.onHyperLinkClick(linkAsString);
            }
        };

        window.Android = window.Android || new Proxy({}, {
            get: function (target, name) {
                return function (args) {
                    var resultArgs = args || [];
                    console.log("Function '" + name + "' has been called with args '" + resultArgs + "' on Android object");
                }
            }
        });

        window.onerror = function (message, source, line, column) {
            var e = {
                message: message,
                source: source,
                line: line,
                column: column
            };
            var errorLog = JSON.stringify(e);
            NativeCallbacks.onWindowError(errorLog);
            return false;
        };

        var MobileClient = (function () {
            var Report = function () {
                return {
                    run: function (config) {
                        NativeCallbacks.onScriptReady();

                        var content = config.content;
                        console.log(content);

                        jQuery("#container").html(content);
                        jQuery("script").bind("load", function() {
                            NativeCallbacks.onReportRenedered();
                        });
                    }
                }
            };

            var self = this;
            self.report = new Report();

            function Client() {
                return {
                    report: function () {
                        return self.report;
                    }
                }
            }

            var instance;
            return {
                instance: function () {
                    if (instance == null) {
                        instance = new Client();
                        instance.constructor = null;
                    }
                    return instance;
                }
            };
        })();
    </script>
</head>
<body>
<div id="container"></div>
</body>