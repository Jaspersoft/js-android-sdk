<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN"
        "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">

<head xmlns="http://www.w3.org/1999/html">

    <title>TIBCO Jaspersoft</title>
    <style>
        html {height: 100%;}
        body {min-height: 100%;}
    </style>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript">

    var NativeCallbacks = {
        onRendered: function () {
            return Android.onRendered();
        },
        onCleared: function () {
            return Android.onCleared();
        },
        onError: function (error) {
            return Android.onError(error);
        }
    };

    window.onerror = function (message) {
        NativeCallbacks.onError(message);
        return false;
    };

    var MobileClient = (function () {
        var instance;

        function Client() {
            var report = new Report();

            window.onresize = function() {
                updateRenderRect(document.documentElement.offsetWidth, document.documentElement.offsetHeight);
            }

            function appendViewportMeta() {
                var viewport = document.createElement('meta');
                viewport.name = "viewport";
                viewport.content = "width=" + document.documentElement.offsetWidth + ", height=" + document.documentElement.offsetHeight + ", user-scalable=yes";
                document.head.appendChild(viewport);
            }

            function updateRenderRect(width, height) {
                var container = document.getElementById('container');

                // Because of default body margin (8px)
                var newContainerHeight = height - 16;
                var newContainerWidth = width - 16;

                container.style.height = newContainerHeight + "px";
                container.style.width = newContainerWidth + "px";
            }

            return {
                report: function () {
                    appendViewportMeta();
                    return report;
                }
            }
        }

        function Report() {
            return {
                show: function (reportPage) {
                    jQuery("#container").html(reportPage);
                    NativeCallbacks.onRendered();
                },
                clear: function () {
                    jQuery("#container").empty();
                    NativeCallbacks.onCleared();
                }
            }
        };

        return {
            getInstance: function() {
                if (!instance) {
                    instance = new Client();
                }
                return instance;
            }
        };
    })();
    </script>
</head>
<body>
<div id="container"></div>
</body>